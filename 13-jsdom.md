# JSDOM

JSDOM - чисто для фронтенд инженеров.

Помните, как в начале мы обсуждали, что E2E тесты - это долго, дорого, медленно.

Как запускает тесты jest? Да и любой другой тест драйвер.
Тесты запускаются в обычной nodejs.

А платформа nodejs - это тот же движок v8, который есть у нас в хроме.

Это все круто, но есть проблема. Помимо того, что мы полагаемся на js,
нам надо использовать DOM и BOM.

BOM - Browser Object Model.
Это по сути набор API, с которыми мы можем работать, используя js, в браузере.

В nodejs у нас нет document, window.
А раз всего этого нет, то мы не можем обращаться к элементам, создавать узлы.
Нет функций atob, btoa, fetch

И чтобы это компенсировать, был создан проект JSDOM, который эмулирует 'недобраузер'.
В нем имеются DOM, BOM и вопрос, насколько это работает? Сейчас попробуем разобраьтся.

Важно понимать, что браузер - это самые сложные приложения, которые существуют.
В связи с тем, что в браузере реализованы сложнейшие механизмы всплытия, погружения,
нахождения, в JSDOM сделали осознанный выбор, что у них нет механизма `Layout`.

Поэтому если код работает с
offsetWidth / Height
getComputedStyle
clientHeight
..

Для того придется реализовывать костыли, тесты которого не будут иметь реальной
ценности.

И также у нас не будут работать обзерверы. Поэтому никакие обзерверы никогда не
вызовутся, тк нет Layout.

Нам остается запомнить, что ВСЕ связанное с DOM и их расположением на странице в
другие места, то лучше так и сделать. Иначе надо быть готовым к последствиям.
