# Пирамида тестирования

Есть разные виды тестирования и основную классификацию и схему можно представить
в виде пирамиды:
E2E - End-to-End | Мало
Интеграционное
Unit - Модульные тесты | Много

End-to-End тесты имитируют пользователя.
Но о чем E2E тесты? Они про то, что сломалось с точки зрения максимально
внешнего проявления интерфейсов.

Но если что-то сломается, тогда E2E тесты не смогут сказать, как часть
кода полетела. Условно, если у нас много логики, что влияют
друг на друга. Какая логика это сломала - удачных раскопок.

E2E тесты очень медленные. Почему?
Потому что он эмулирует пользователя в браузере.
Все помнят классическую шутку про хром: "сколько хром находит памяти, столько и
съедает".

Система, которая выполняет тесты, скорее всего использую devtools. А включенные
devtools всегда замедляют работу приложения.

Также предположим, что на нашем компьютере тесты работают 100 минут.
Станем ли мы запускать тесты после каждого изменения? Конечно нет.
А чем меньше мы запускаем тестов, тем меньше они приносят нам пользы.

---
Хорошо, что если взять отдельные части системы - какие-то модули, а для
большей конкретики пусть будут классы.

Допустим, мы можем написать тесты для каждого отдельного модуля и понять,
как они должны себя вести при разных входных данных.

Окей, предположим, каждый отдельный модуль работает как надо.
Есть ли у нас гарантия, что те же самые модули будут работать также хорошо и правильно,
когда мы начнем их соединять?

К сожалению у нас нет такой гарантии. Именно поэтому в нашей пирамиде мы должны
вспомнить серединку - интеграционные тесты.

Интеграционные тесты тестируют отдельный кусок системы, но не всю систему.
То есть эти тесты дают нам некую гарантию, что отдельные куски - модули
были правильно соединены друг с другом и программисты поняли друг друга правильно.

И у нас есть прекрасные UNIT тесты. А прекрасны они тем, что они быстрые.
И так они занимаются покрытием.

При этом также у нас набирает популярность 4 сущность, самая нижняя часть пирамиды - это TS, про которую мы умолчали в начале.

---
Зачем писать тесты на вещи, которые можно не писать тесты?
Ведь зачем нам писать тесты на то, что исходно может предотвращаться на уровне
строгой типизации?

Если опустить надежность тайпскрипта и посмотреть на всю пирамиду, то мы можем
обнаружить (если двигаться снизу вверх), что чем выше мы находимся, тем больше
мы проверяем за 1 тест.

Поэтому TS проверяет маленький кусочек системы.
Unit проверяет целый модуль
Интеграционный проверяет несколько модулей
E2E проверяет большой кусок системы.
